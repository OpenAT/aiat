function addMultiselect(a){var b=a.up("li"),c=a.up("ul"),d=parseInt(c.readAttribute("ref"),10)+1;if(0==parseInt($F(a))||"x"==$F(a)||""==$F(a))b.remove();else{var e=c.select("select");if(0!=e[e.length-1].selectedIndex){var f=b.clone(!0);f.writeAttribute("id",c.readAttribute("id")+"_"+d),c.insert({bottom:f})}}c.writeAttribute("ref",d),void 0!=Sortable&&Sortable.create(c,{constraint:"vertical"})}function MM_openBrWindow(a,b,c){window.open(a,b,c)}function isValidDate(a,b,c){if(String(a).length<4||parseInt(a,10)!=a||parseInt(b,10)!=b||parseInt(c,10)!=c)return!1;a=parseInt(a,10),b=parseInt(b,10),c=parseInt(c,10);var d=new Date(a,b,c);return"[object Date]"!==Object.prototype.toString.call(d)||isNaN(d.getTime())?!1:d.getFullYear()!=a||d.getMonth()!=b||d.getDate()!=c?!1:!0}function validateEmail(a,b){var c=/^[_\.0-9a-z-]+@([0-9a-z-][0-9a-z-]+\.){1,}?([a-z]{2,})$/i;return!b&&a.length<1?!0:a.length<7?!1:c.exec(a)?!0:!1}function change_prop(a,b,c,d,e){if(d){var f=!0;e.length>1&&(f=confirm(e)),f&&($("scrollposition")&&change_prop(a,"scrollposition",document.viewport.getScrollOffsets().top,!1,""),$(b).value=c,$(a).submit())}else $(b).value=c}function addBookmark(){var a=window.location.href,b=document.title;Prototype.Browser.IE?window.external.AddFavorite(a,b):Prototype.Browser.Gecko?window.sidebar.addPanel(b,a,""):"object"==typeof window.sidebar&&"function"==typeof window.sidebar.addPanel?window.sidebar.addPanel(b,a,""):alert("It's not possible to add bookmarks with a click with your browser.\nBut you can do this manually. (Please look in browser's help)")}function toggleSelectBoxes(a,b){if(Prototype.Browser.IE)for(var c,d=$$("select"),e=0;c=d[e];++e)c.style.visibility=a;for(var c,f=$$("object, embed"),e=0;c=f[e];++e)("visible"==a&&!dontShowFlash.has(c.identify())||"visible"!=a)&&(c.style.visibility=a)}var helper={superTrace:function(a,b){void 0==b&&(b="");var c="";for(var d in a)"function"!=typeof a[d]&&("object"==typeof a[d]?(c+=b+d+":\n",c+=helper.superTrace(a[d],b+"    ")):c+=b+d+": "+a[d]+"\n");return c},lastAlerts:[],writeAlertToPage:function(a,b,c){a=String(a),void 0==b&&(b=5),$("alertInPage")||$$("body")[0].insert({bottom:Builder.node("div",{id:"alertInPage",style:"background:#f90;color:#000;padding:5px 10px;border:solid 1px #f00;font-weight:bold;position:fixed;z-index:10000;"})});var d=Builder.node("div").update(a.replace(/  /g," &nbsp;").replace(/\n/g,"<br>"));switch(helper.lastAlerts.push(d),$("alertInPage").insert({bottom:d}),c){case"tr":case"rt":$("alertInPage").setStyle({top:"0px",right:"0px",bottom:"auto",left:"auto"});break;case"br":case"rb":$("alertInPage").setStyle({top:"auto",right:"0px",bottom:"0px",left:"auto"});break;case"bl":case"lb":$("alertInPage").setStyle({top:"auto",right:"auto",bottom:"0px",left:"0px"});break;default:$("alertInPage").setStyle({top:"0px",right:"auto",bottom:"auto",left:"0px"})}setTimeout(function(){if(helper.lastAlerts.length>1){var a=helper.lastAlerts.shift();a.remove()}}.bind(this),1e3*b)}},html5FormClass=Class.create({initialize:function(){this.allPlaceholder={},this.allHtml5Inputs={},this.allForms={},this.allScrollers={},systemVars.isMobile||Modernizr.touch||$$("body")[0].on("click","a[href^=#]",this.scrollEffect.bind(this)),this.rescan()},rescan:function(){Modernizr.input.placeholder||this.doSupportPlaceholder($$("input[placeholder]")),"placeholder"in document.createElement("textarea")||this.doSupportPlaceholder($$("textarea[placeholder]")),this.addFormLoading(),this.makeHtml5Inputs()},makeHtml5Inputs:function(){for(var a,b=$$("input[data-html5input]"),c=0;a=b[c];++c){var d=a.identify();if(void 0==this.allHtml5Inputs[d]){var e=a.readAttribute("data-html5input");Modernizr.inputtypes[e]&&a.setAttribute("type",e),this.allHtml5Inputs[d]=!0}}},addFormLoading:function(){for(var a,b=$$("form"),c=0;a=b[c];++c){var d=a.identify();if(void 0==this.allForms[d]){this.allForms[d]=[];var e=a.readAttribute("data-ignoreAutoSubmit");"true"!=e&&a.observe("submit",this.showLoading.bind(this))}}},doSupportPlaceholder:function(a){if(a.length>0)for(var b,c=0;b=a[c];++c){var d=b.identify();if(void 0==this.allPlaceholder[d]){var e=b.readAttribute("placeholder");if(null!=e){"password"==b.readAttribute("type")&&b.setAttribute("data-useAsType","password"),$F(b).blank()&&("password"==b.readAttribute("type")&&b.setAttribute("type","text"),b.value=e),b.observe("focus",this.doFocus.bindAsEventListener(this,b,e)),b.observe("blur",this.doBlur.bindAsEventListener(this,b,e));var f=b.up("form");if(void 0!=f){var g=f.identify();void 0==this.allForms[g]&&(this.allForms[g]=[],f.observe("submit",this.doSubmit.bindAsEventListener(this,g)),f.observe("submit",this.showLoading.bind(this))),this.allForms[g].push({dom:b,placeholder:e})}}this.allPlaceholder[d]=!0}}},doFocus:function(a,b,c){$F(b)==c&&("password"==b.readAttribute("data-useAsType")&&b.setAttribute("type","password"),b.value="")},doBlur:function(a,b,c){$F(b).blank()&&("password"==b.readAttribute("data-useAsType")&&b.setAttribute("type","text"),b.value=c)},doSubmit:function(a,b){if(!Modernizr.input.placeholder)for(var c,d=0;c=this.allForms[b][d];++d)this.doFocus(void 0,c.dom,c.placeholder)},showLoading:function(){var a=$$("body")[0];$("loadingDarkoverlay")?($("loadingDarkoverlay").setStyle({display:"block"}),$("loadingLightoverlay").setStyle({display:"block"})):(a.appendChild(Builder.node("div",{id:"loadingDarkoverlay"})),a.appendChild(Builder.node("div",{id:"loadingLightoverlay"},[Builder.node("div",{id:"loadingImgDiv"},Builder.node("img",{src:systemVars.htmlRoot+systemVars.templatesFolder+"images/loading.gif"})),Builder.node("div",{id:"loadingText"})]))),$("loadingText").update(langVars.sendingForm);var b=a.getDimensions(),c=document.viewport.getDimensions();b.height>c.height?$("loadingDarkoverlay").setStyle({position:"absolute",height:b.height+"px"}):$("loadingDarkoverlay").setStyle({position:"absolute",height:c.height+"px"});var d=document.viewport.getScrollOffsets(),e=$("loadingLightoverlay").getDimensions();$("loadingLightoverlay").setStyle({position:"absolute",top:d.top+c.height/2-e.height/2+"px",left:d.left+c.width/2-e.width/2+"px"})},hideLoading:function(){$("loadingDarkoverlay").setStyle({display:"none"}),$("loadingLightoverlay").setStyle({display:"none"})},scrollEffect:function(a){if(!a.target.hasClassName("skip-scrolling")&&a.target.readAttribute("href")){var b=a.target.readAttribute("href").substr(1);if(!b.blank()&&$(b)){a.stop();var c=parseFloat(a.target.readAttribute("data-scrollduration"),10);isNaN(c)&&(c=.4),Effect.ScrollTo(b,{duration:c})}}}}),imgRoClass=Class.create({initialize:function(){this.ids={},$$("img[data-imghover]").each(function(a){this.addFunctionality(a.identify())},this)},reinit:function(){$$("img[data-imghover]").each(function(a){var b=a.identify();this.ids[b]||this.addFunctionality(b)},this)},addFunctionality:function(a){var b=$(a),c=b.readAttribute("data-imghover"),d=b.readAttribute("src").gsub(/[^\/]+?\.(jpg|gif|png)/,"");"/"==d.substr(d.length-1,1)?this.ids[a]={n:b.readAttribute("src"),o:d+c,preload:new Image}:this.ids[a]={n:b.readAttribute("src"),o:b.readAttribute("src")+c,preload:new Image},this.ids[a].preload.src=this.ids[a].o,Event.observe(b,"mouseover",this.doRo.bind(this)),Event.observe(b,"mouseout",this.doNoRo.bind(this))},doRo:function(a){var b=Event.element(a);b.src=this.ids[b.readAttribute("id")].o},doNoRo:function(a){var b=Event.element(a);b.src=this.ids[b.readAttribute("id")].n}}),html5Form;document.observe("dom:loaded",function(){html5Form=new html5FormClass,new imgRoClass});var dontShowFlash=[];Array.prototype.removeDuplicates=function(a){void 0==a&&(a=0);for(var b=0,c=this.length;c>b;++b)for(var d=this.length-1;d>b;d--)"object"!=typeof this[b]&&this[b]==this[d]?this.splice(d,1):"object"==typeof this[b]&&this[b][a]==this[d][a]&&this.splice(d,1)},Array.prototype.has=function(a){for(var b,c=0;b=this[c];++c)if(b==a)return!0;return!1},Array.prototype.merge=function(a){for(var b,c=0;b=a[c];++c)this.push(b);return this};